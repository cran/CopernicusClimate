<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Downloading from Copernicus Climate Service</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Downloading from Copernicus Climate
Service</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>When obtaining data from Copernicus Climate Data Service you cannot
download the data directly. You need to know which data you want, submit
a request for a specific dataset. Wait for your request to complete, and
if successful, download the data. The <code>CopernicusClimate</code>
package has functions to facilitate this process. This vignette will
walk you through the different steps to download data.</p>
<ul>
<li><a href="#finding-datasets">Finding datasets</a></li>
<li><a href="#specifying-a-request">Requesting a dataset</a></li>
<li><a href="#tracking-submitted-requests">Tracking submitted
requests</a></li>
<li><a href="#downloading-data">Download data</a></li>
</ul>
<p>But before you can even get started, there are some things you have
to prepare first, as explained in the following section.</p>
</div>
<div id="prerequisites" class="section level2">
<h2>Prerequisites</h2>
<div id="access-token" class="section level3">
<h3>Access token</h3>
<p>This R package is built around the Application Programming Interface
(API) provided by C3S. Many of the features of this API require to
identify yourself, for which a ‘key’ or API token is used. You can get
one by creating an account at <a href="https://cds.climate.copernicus.eu/profile" class="uri">https://cds.climate.copernicus.eu/profile</a>.</p>
<p>Once you have an account you can generate (or refresh) an API key.
You can use this token by means of the <code>token</code> argument in
many of the functions of this package. But rather then providing the key
separately each time, you can use the key throughout your R session by
setting it once with <code>cds_set_token()</code>.</p>
<p>However, if you want to share your work, it is not very secure to
keep your strictly personal key hard coded in your script. Furthermore,
setting the key with <code>cds_set_token()</code> does not persist
across sessions. Instead, you could set it as an option in your
<code>.rprofile</code> file, or as a environmental variable on your
system. In both cases the variable should be named
<code>CDSAPI_KEY</code>. This variable is automatically picked up by
<code>cds_get_token()</code> and you don’t have to specify it anywhere
in your script.</p>
<p>You can check if your token works with
<code>cds_token_works()</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(CopernicusClimate)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">message</span>(</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="st">&quot;The machine that rendered this vignette &quot;</span>,</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="fu">ifelse</span>(</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="fu">cds_token_works</span>(), <span class="st">&quot;has&quot;</span>, <span class="st">&quot;does not have&quot;</span>),</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  <span class="st">&quot; a working token&quot;</span>)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co">#&gt; The machine that rendered this vignette does not have a working token</span></span></code></pre></div>
</div>
<div id="licences" class="section level3">
<h3>Licences</h3>
<p>In order to download datasets you need to accept its accompanying
licence. You can use <code>cds_dataset_form()</code> to inspect under
which licence a dataset is provided, like so:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>licence_info <span class="ot">&lt;-</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="fu">cds_dataset_form</span>(<span class="st">&quot;reanalysis-era5-pressure-levels&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">&quot;licences&quot;</span>)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>licence_info <span class="ot">&lt;-</span> licence_info<span class="sc">$</span>details[[<span class="dv">1</span>]]<span class="sc">$</span>details<span class="sc">$</span>licences[[<span class="dv">1</span>]]</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="fu">print</span>(licence_info)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; $id</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt; [1] &quot;cc-by&quot;</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt; $revision</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt; $label</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CC-BY licence&quot;</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">#&gt; $contents_url</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt; [1] &quot;https://object-store.os-api.cci2.ecmwf.int:443/cci2-prod-catalogue/licences/cc-by/cc-byv1_2b61eb0b42e053566cb9447c1d2847a69a275c095e00fca00bad1bf5326a9432.md&quot;</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt; $attachment_url</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt; [1] &quot;https://spdx.org/licenses/CC-BY-4.0&quot;</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt; $spdx_identifier</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CC-BY-4.0&quot;</span></span></code></pre></div>
<p>You can accept this licence by calling
<code>cds_accept_licence(licence_info$id, licence_info$revision)</code>.
You only need to do this once for every licence. Accepted licences are
stored with your account and can be listed with
<code>cds_accepted_licences()</code>. Without accepting required
licences you cannot submit a successful request for downloading it.</p>
</div>
</div>
<div id="finding-datasets" class="section level2">
<h2>Finding datasets</h2>
<div id="websites" class="section level3">
<h3>Websites</h3>
<p>If you want a visual interface for exploring available datasets, you
can use your web browser and visit either the <a href="https://cds.climate.copernicus.eu/datasets">Climate Data Store</a>
or <a href="https://cds.climate.copernicus.eu/stac-browser/">STAC
catalogue</a>. Both allow you to navigate through the treasures of
information, and identify which dataset best serves your needs. You can
even copy the request code to the system clipboard and use this package
to get the request from the clipboard and execute it. This is
illustrated in <code>vignette(&quot;translate&quot;)</code>.</p>
</div>
<div id="programatically" class="section level3">
<h3>Programatically</h3>
<p>You can also use this R package to look for datasets. You could start
by listing them all:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">cds_list_datasets</span>()</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 124 x 16</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt;    type       id    stac_version title description keywords license extent      </span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;       &lt;list&gt;   &lt;chr&gt;   &lt;list&gt;      </span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt;  1 Collection rean~ 1.0.0        ERA5~ &quot;ERA5 is t~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt;  2 Collection rean~ 1.0.0        ERA5~ &quot;ERA5-Land~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">#&gt;  3 Collection deri~ 1.0.0        ERA5~ &quot;ERA5 is t~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt;  4 Collection rean~ 1.0.0        ERA5~ &quot;ERA5-Land~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt;  5 Collection deri~ 1.0.0        ERA5~ &quot;ERA5 is t~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt;  6 Collection rean~ 1.0.0        ERA5~ &quot;ERA5 is t~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">#&gt;  7 Collection deri~ 1.0.0        ERA5~ &quot;ERA5-Land~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co">#&gt;  8 Collection sis-~ 1.0.0        Agro~ &quot;This data~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#&gt;  9 Collection deri~ 1.0.0        Ther~ &quot;This data~ &lt;list&gt;   other   &lt;named list&gt;</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; 10 Collection sate~ 1.0.0        Sea ~ &quot;This data~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">#&gt; # i 114 more rows</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co">#&gt; # i 8 more variables: links &lt;list&gt;, assets &lt;named list&gt;, published &lt;chr&gt;,</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co">#&gt; #   updated &lt;chr&gt;, `sci:doi` &lt;chr&gt;, `cads:disabled_reason` &lt;chr&gt;,</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="co">#&gt; #   `cads:sanity_check` &lt;list&gt;, `cads:message` &lt;list&gt;</span></span></code></pre></div>
<p>But you can also look for specific datasets using free search text
and / or predefined keywords:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">cds_search_datasets</span>(<span class="at">search =</span> <span class="st">&quot;rain&quot;</span>, <span class="at">keywords =</span> <span class="st">&quot;Temporal coverage: Future&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 9 x 15</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt;   type       id     stac_version title description keywords license extent      </span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt; * &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;       &lt;list&gt;   &lt;chr&gt;   &lt;list&gt;      </span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; 1 Collection proje~ 1.0.0        CMIP~ &quot;This cata~ &lt;list&gt;   other   &lt;named list&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; 2 Collection sis-e~ 1.0.0        Clim~ &quot;The Pan-E~ &lt;list&gt;   other   &lt;named list&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt; 3 Collection sis-e~ 1.0.0        Clim~ &quot;This data~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt; 4 Collection sis-h~ 1.0.0        Temp~ &quot;This data~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt; 5 Collection sis-e~ 1.0.0        Esse~ &quot;This data~ &lt;list&gt;   other   &lt;named list&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; 6 Collection sis-t~ 1.0.0        Moun~ &quot;This data~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; 7 Collection sis-e~ 1.0.0        Clim~ &quot;This data~ &lt;list&gt;   CC-BY-~ &lt;named list&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; 8 Collection proje~ 1.0.0        CMIP~ &quot;This cata~ &lt;list&gt;   other   &lt;named list&gt;</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; 9 Collection proje~ 1.0.0        CORD~ &quot;This cata~ &lt;list&gt;   other   &lt;named list&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; # i 7 more variables: links &lt;list&gt;, assets &lt;named list&gt;, published &lt;chr&gt;,</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; #   updated &lt;chr&gt;, `sci:doi` &lt;chr&gt;, `cads:disabled_reason` &lt;list&gt;,</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt; #   `cads:sanity_check` &lt;list&gt;</span></span></code></pre></div>
<p>Use <code>cds_catalogue_vocabulary()</code> to list available
predefined keywords.</p>
<p>You will see that either approach results in a
<code>data.frame</code> with a column named <code>id</code>. You can use
this <code>id</code> to refer to when setting up a request for
download.</p>
</div>
<div id="favourite-datasets" class="section level3">
<h3>Favourite datasets</h3>
<p>You can also mark your favourite datasets with a star using
<code>cds_assign_star()</code>. You can get list your favourite datasets
with <code>cds_starred()</code>. This makes it easier to find datasets
you use a lot. You can remove a star with
<code>cds_remove_star()</code>.</p>
</div>
</div>
<div id="specifying-a-request" class="section level2">
<h2>Specifying a request</h2>
<p>In many cases you cannot download an entire dataset at once, because
it it too large. This means you have to specify a subset that you want
to have.</p>
<div id="what-are-my-options" class="section level3">
<h3>What are my options?</h3>
<p>How do you know what options you have to subset a dataset? These
options differ for each dataset, so there is no straightforward answer.
However, you can inspect what options you have for a specific dataset.
You can start by obtaining the <code>cds_dataset_form()</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>dataset_form <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="fu">cds_dataset_form</span>(<span class="st">&quot;reanalysis-era5-pressure-levels&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>dataset_form</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 13 x 9</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt;    name            label      required css   type  id    help  details  children</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;           &lt;chr&gt;      &lt;lgl&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;list&gt;   &lt;list&gt;  </span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt;  1 product_type    Product t~ TRUE     todo  Stri~ prod~ &lt;NA&gt;  &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">#&gt;  2 variable        Variable   TRUE     todo  Stri~ vari~ Plea~ &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;  3 year            Year       TRUE     todo  Stri~ year  &lt;NA&gt;  &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt;  4 month           Month      TRUE     todo  Stri~ month &lt;NA&gt;  &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt;  5 day             Day        TRUE     todo  Stri~ day   &lt;NA&gt;  &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt;  6 time            Time       TRUE     todo  Stri~ time  UTC ~ &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt;  7 pressure_level  Pressure ~ TRUE     todo  Stri~ pres~ &lt;NA&gt;  &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt;  8 area_group      Geographi~ NA       &lt;NA&gt;  Excl~ area~ Sele~ &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt;  9 global          Whole ava~ NA       &lt;NA&gt;  Free~ glob~ &lt;NA&gt;  &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt; 10 area            Sub-regio~ NA       &lt;NA&gt;  Geog~ area  Sele~ &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt; 11 data_format     Data form~ TRUE     todo  Stri~ data~ Sele~ &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt; 12 download_format Download ~ TRUE     todo  Stri~ down~ If y~ &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; 13 licences        Terms of ~ NA       &lt;NA&gt;  Lice~ &lt;NA&gt;  &lt;NA&gt;  &lt;tibble&gt; &lt;tibble&gt;</span></span></code></pre></div>
<p>This results in a <code>data.frame</code> listing which aspects of a
dataset you can select from. Each row represents an aspect (except for
the row with the <code>name</code> <code>&quot;licences&quot;</code>). The column
<code>details</code> contains information about the available values.
You could for instance look at the possible values for the
<code>pressure_level</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>values <span class="ot">&lt;-</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  dataset_form <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">&quot;pressure_level&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="fu">pull</span>(<span class="st">&quot;details&quot;</span>)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>values[[<span class="dv">1</span>]]<span class="sc">$</span>details<span class="sc">$</span>values <span class="sc">|&gt;</span> <span class="fu">unlist</span>()</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;1&quot;    &quot;2&quot;    &quot;3&quot;    &quot;5&quot;    &quot;7&quot;    &quot;10&quot;   &quot;20&quot;   &quot;30&quot;   &quot;50&quot;   &quot;70&quot;  </span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt; [11] &quot;100&quot;  &quot;125&quot;  &quot;150&quot;  &quot;175&quot;  &quot;200&quot;  &quot;225&quot;  &quot;250&quot;  &quot;300&quot;  &quot;350&quot;  &quot;400&quot; </span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt; [21] &quot;450&quot;  &quot;500&quot;  &quot;550&quot;  &quot;600&quot;  &quot;650&quot;  &quot;700&quot;  &quot;750&quot;  &quot;775&quot;  &quot;800&quot;  &quot;825&quot; </span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt; [31] &quot;850&quot;  &quot;875&quot;  &quot;900&quot;  &quot;925&quot;  &quot;950&quot;  &quot;975&quot;  &quot;1000&quot;</span></span></code></pre></div>
<p>Using this information you can start building your request using
<code>cds_build_request()</code>. You can start by just specifying your
dataset:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>request <span class="ot">&lt;-</span> <span class="fu">cds_build_request</span>(<span class="st">&quot;reanalysis-era5-pressure-levels&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">summary</span>(request)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt;                 Length Class  Mode     </span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt; product_type     1     -none- character</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt; variable        16     -none- list     </span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt; year            86     -none- list     </span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt; month           12     -none- list     </span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt; day             31     -none- list     </span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt; time            24     -none- list     </span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt; pressure_level  37     -none- list     </span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#&gt; data_format      1     -none- character</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; download_format  1     -none- character</span></span></code></pre></div>
<p>The function <code>cds_build_request()</code> will automatically add
all required parameters to the request and fills it with either their
default value, if available, or all allowed values otherwise. The
request built above will ask for the complete dataset in the default
product type, plus data and download format. As I will explain in the
following section, this request will fail for most users. So let’s
narrow it down:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>request <span class="ot">&lt;-</span> <span class="fu">cds_build_request</span>(</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="st">&quot;reanalysis-era5-pressure-levels&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="at">variable       =</span> <span class="st">&quot;temperature&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="at">pressure_level =</span> <span class="st">&quot;1000&quot;</span>,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="at">year           =</span> <span class="st">&quot;2025&quot;</span>,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="at">month          =</span> <span class="st">&quot;01&quot;</span>,</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="at">day            =</span> <span class="st">&quot;01&quot;</span>,</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="at">area           =</span> <span class="fu">c</span>(<span class="at">n =</span> <span class="dv">60</span>, <span class="at">e =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">s =</span> <span class="dv">40</span>, <span class="at">w =</span> <span class="dv">10</span>),</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  <span class="at">data_format    =</span> <span class="st">&quot;netcdf&quot;</span>)</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="fu">summary</span>(request)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="co">#&gt;                 Length Class  Mode     </span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="co">#&gt; variable         1     -none- list     </span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co">#&gt; pressure_level   1     -none- list     </span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="co">#&gt; year             1     -none- list     </span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="co">#&gt; month            1     -none- list     </span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="co">#&gt; day              1     -none- list     </span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="co">#&gt; area             4     -none- numeric  </span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="co">#&gt; data_format      1     -none- character</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="co">#&gt; product_type     1     -none- character</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="co">#&gt; time            24     -none- list     </span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="co">#&gt; download_format  1     -none- character</span></span></code></pre></div>
<p>This looks like a reasonable request.</p>
</div>
<div id="how-much-can-i-get" class="section level3">
<h3>How much can I get?</h3>
<p>As mentioned before, the amount of data that can be requested for
each download is restricted. In order to test how much a request would
cost you can call <code>cds_estimate_costs()</code>. Using the example
above, if you want to download the full dataset, the estimated costs are
as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">cds_token_works</span>()) {</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">cds_estimate_costs</span>(<span class="st">&quot;reanalysis-era5-pressure-levels&quot;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;You need a working token to estimate costs&quot;</span>)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>}</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt; You need a working token to estimate costs</span></span></code></pre></div>
<p>In this example the costs exceed the limit, such that this request
will fail. If we estimate the costs for the more restricted request, we
get:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">cds_token_works</span>()) {</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">cds_estimate_costs</span>(request)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;You need a working token to estimate costs&quot;</span>)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>}</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; You need a working token to estimate costs</span></span></code></pre></div>
<p>This is a request that we can afford.</p>
</div>
</div>
<div id="submitting-a-request" class="section level2">
<h2>Submitting a request</h2>
<p>Once you have established which dataset you want to download and how
you wish to subset it, you can submit a request to C3S. Let’s submit the
request as shown above:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">cds_token_works</span>()) {</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  job <span class="ot">&lt;-</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>    <span class="fu">cds_submit_job</span>(request)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  job</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;You need a working token to submit a request&quot;</span>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>}</span></code></pre></div>
<p>By default this function will wait until the request has been
processed by C3S. But when you set the argument
<code>wait = FALSE</code>, the function will return immediately. In that
case, you can submit multiple jobs where you don’t have to wait for each
individual request to complete.</p>
</div>
<div id="tracking-submitted-requests" class="section level2">
<h2>Tracking submitted requests</h2>
<p>When submitting a request and choose not to wait for it to complete,
you may want to track the progress of your request. You can use
<code>cds_list_jobs()</code> to list all your submitted jobs. If you
want the status of a specific job, you can use its identifier (id). You
were sent this id when you submitted it earlier. So we can have a look
at the status of our job submitted above:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">cds_token_works</span>()) {</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="fu">cds_list_jobs</span>(job<span class="sc">$</span>jobID)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;You need a working token to get a job status&quot;</span>)</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>}</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; You need a working token to get a job status</span></span></code></pre></div>
</div>
<div id="downloading-data" class="section level2">
<h2>Downloading data</h2>
<p>Now that we have submitted the request we can download it (if it is
completed successfully) with <code>cds_download_jobs()</code>. If you
don’t specify a job identifier, it will download all (previously
submitted) successful jobs. You can also download one or more specific
jobs. Note that this function will use parallel downloads which should
give you some performance advantage when downloading multiple jobs. For
now let’s try to download the submitted job:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="st">&quot;result.nc&quot;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">cds_token_works</span>()) {</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  file_result <span class="ot">&lt;-</span> <span class="fu">cds_download_jobs</span>(job<span class="sc">$</span>jobID, <span class="fu">tempdir</span>(), filename)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Downloading data only works with a valid token&quot;</span>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>}</span></code></pre></div>
<p>Now you can do whatever it is you want to do with the data:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), filename)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(fn)) {</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  </span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  <span class="fu">library</span>(stars)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  <span class="fu">library</span>(ggplot2)</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  </span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">read_mdim</span>(fn)</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>  </span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>    <span class="fu">geom_stars</span>(<span class="at">data =</span> result) <span class="sc">+</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>    <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span><span class="fu">strftime</span>(valid_time, <span class="st">&quot;%H:%M&quot;</span>), <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">fill =</span> <span class="st">&quot;Temperature [K]&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_blank</span>())</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;File wasn&#39;t downloaded&quot;</span>)</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>}</span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
